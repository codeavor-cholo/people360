(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["af4c893c"],{"17bd":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"700px","max-width":"90vw"}},[s("q-card-section",{staticClass:"row"},[s("div",{staticClass:"text-h6"},[e._v("Add Users")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),s("q-form",{on:{submit:function(t){return t.preventDefault(),e.addUser()}}},[s("q-card-section",{staticClass:"addusers"},[s("div",{staticClass:"row q-mb-md"},[s("q-input",{ref:"name",staticClass:"col",attrs:{label:"Name"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),s("div",{staticClass:"row q-mb-xs"},[s("q-input",{ref:"email",staticClass:"col",attrs:{type:"email",rules:[function(t){return e.isValidEmailAddress(t)||"Please enter a valid email address"}],"lazy-rules":"",label:"Email"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),s("div",{staticClass:"row q-mb-md"},[s("q-input",{ref:"password",staticClass:"col",attrs:{label:"Password",type:e.isPwd?"password":"text",rules:[function(e){return e.length>=6||"Please enter atleast 6 characters"}],"lazy-rules":""},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)]),s("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[s("q-btn",{staticStyle:{width:"100px"},attrs:{icon:"save",type:"submit",label:"Save",color:"primary"}})],1)],1)],1)},r=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),i=s.n(o),n=s("2f62"),l=s("1732"),c=s("fc1b");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){i()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={data:function(){return{isPwd:!0,formData:{id:Object(l["a"])(),name:"",email:"",password:"",online:!1}}},methods:u({},Object(n["b"])("users",["fbAddUser"]),{addUser:function(){var e=this;if(this.$q.loading.show(),this.$refs.email.validate(),this.$refs.password.validate(),!this.$refs.email.hasError&&!this.$refs.password.hasError){var t=c["d"].httpsCallable("addUser");t({email:this.formData.email,password:this.formData.password}).then((function(t){console.log(t),e.$q.loading.hide()})).catch((function(t){console.log(t),e.$q.loading.hide()})),this.$emit("close")}},isValidEmailAddress:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}})},p=f,m=s("2877"),b=Object(m["a"])(p,a,r,!1,null,"5402ca4c",null);t["default"]=b.exports},5335:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{},[s("div",{},[s("q-table",{attrs:{filter:e.filter,title:"Users Table",color:"primary",data:e.data,columns:e.columns,"row-key":"id"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name)+" "+e._s(t.row.middleName)+" "+e._s(t.row.lastName))]),s("q-td",{key:"email",attrs:{props:t}},[e._v(e._s(t.row.email))]),s("q-td",{key:"ip",attrs:{props:t}},[e._v(e._s(t.row.ip))]),s("q-td",{key:"roles",attrs:{props:t}},[e._v(e._s(t.row.roles))]),s("q-td",[s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"edit"},on:{click:function(s){return e.showEditUserModal(t.row)}}},[s("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[e._v("Edit")])],1),s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"add"},on:{click:function(s){return e.showAddInspectorModal(t.row)}}},[s("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[e._v("Add as Inspector")])],1)],1)],1)]}}])})],1)]),s("q-dialog",{model:{value:e.showEditUser,callback:function(t){e.showEditUser=t},expression:"showEditUser"}},[s("editusers",{attrs:{user:e.user,id:e.key},on:{close:function(t){e.showEditUser=!1}}})],1),s("q-dialog",{model:{value:e.showAddInspector,callback:function(t){e.showAddInspector=t},expression:"showAddInspector"}},[s("add-inspector",{attrs:{user:e.user,id:e.key},on:{close:function(t){e.showAddInspector=!1}}})],1)],1)},r=[],o=(s("8e6e"),s("8a81"),s("456d"),s("ac6a"),s("cadf"),s("06db"),s("8615"),s("c47a")),i=s.n(o),n=(s("fc1b"),s("2f62"));function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){i()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={data:function(){return{showEditUser:!1,showAddInspector:!1,current:3,user:"",key:"",data:[],userToSubmit:{},filter:"",columns:[{name:"name",align:"left",label:"Full Name",sortable:!0,field:"name"},{name:"email",align:"left",label:"Email",sortable:!0,field:"email"},{name:"ip",align:"left",label:"Login IP",sortable:!0,field:"ip"},{name:"roles",align:"left",label:"Roles",sortable:!0,field:"roles"},{align:"left",label:"Action"}]}},methods:{showEditUserModal:function(e){this.showEditUser=!0,this.user=e,this.key=e.createdBy},showAddInspectorModal:function(e){this.showAddInspector=!0,this.user=e,this.key=e.createdBy}},computed:c({},Object(n["c"])("auth",["users"]),{},Object(n["d"])("auth",["usersDownloaded"])),components:{editusers:s("fa99").default,"add-inspector":s("db5e").default},mounted:function(){this.allusers=this.users;var e=Object.values(this.users);this.data=e}},u=d,f=s("2877"),p=Object(f["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"5e94":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.admin?s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"full-width full-height column"},[e.usersDownloaded?[s("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut absolute-top"}},[s("userstable")],1),s("div",{staticClass:"text-center q-mb-lg no-pointer-events"},[s("q-page-sticky",{staticClass:"all-pointer-events",attrs:{offset:[18,18]}},[s("q-fab",{attrs:{icon:"add",direction:"up",color:"primary"}},[s("q-fab-action",{attrs:{color:"primary",icon:"person_add"},on:{click:function(t){e.showAddUsers=!0}}},[s("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[e._v("Add User")])],1)],1)],1)],1)]:[s("span",{staticClass:"absolute-center"},[s("q-spinner",{attrs:{color:"primary",size:"3em"}})],1)]],2),s("q-dialog",{model:{value:e.showAddUsers,callback:function(t){e.showAddUsers=t},expression:"showAddUsers"}},[s("addusers",{on:{close:function(t){e.showAddUsers=!1}}})],1)],1):e._e()},r=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),i=s.n(o),n=s("2f62"),l=s("fc1b");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){i()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={data:function(){return{admin:!1,showAddUsers:!1,showEditUsers:!1}},computed:d({},Object(n["c"])("auth",["users"]),{},Object(n["d"])("auth",["usersDownloaded"])),components:{addusers:s("17bd").default,userstable:s("5335").default},mounted:function(){var e=this,t=l["c"].auth().currentUser;t&&t.getIdTokenResult().then((function(t){var s=t.claims.admin;1==s&&(e.admin=!0)}))}},f=u,p=s("2877"),m=Object(p["a"])(f,a,r,!1,null,null,null);t["default"]=m.exports},db5e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"700px","max-width":"90vw"}},[s("q-card-section",{staticClass:"row"},[s("div",{staticClass:"text-h6"},[e._v("Add as Inspector")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),s("q-form",{on:{submit:function(t){return t.preventDefault(),e.addToInspector(t)}}},[s("q-card-section",{staticClass:"addusers"},[s("q-input",{ref:"name",staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",label:"Name"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),s("q-input",{ref:"email",staticClass:"col q-mb-none q-pb-sm",attrs:{type:"email",rules:[function(t){return e.isValidEmailAddress(t)||"Please enter a valid email address"}],"lazy-rules":"",label:"Email"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}}),s("q-select",{ref:"role",staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",label:"Role",options:e.optionRole},model:{value:e.formData.roles,callback:function(t){e.$set(e.formData,"roles",t)},expression:"formData.roles"}}),s("q-select",{staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",options:e.options,label:"Inspector Position"},model:{value:e.formData.position,callback:function(t){e.$set(e.formData,"position",t)},expression:"formData.position"}}),s("q-select",{staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",options:e.skillNames,label:"Inspector Special Skill"},model:{value:e.formData.specialSkill,callback:function(t){e.$set(e.formData,"specialSkill",t)},expression:"formData.specialSkill"}})],1),s("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[s("q-btn",{attrs:{type:"submit",icon:"add",label:"Add to Inspector",color:"primary"}})],1)],1)],1)},r=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("f751"),s("7f7f"),s("c47a")),i=s.n(o),n=s("2f62"),l=s("fc1b");s("1732");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){i()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={props:["user","id"],firestore:function(){return{inspectors:l["e"].collection("inspectors"),positions:l["e"].collection("positions"),specialSkills:l["e"].collection("specialSkills")}},data:function(){return{skillNames:[],optionRole:["new","old","Inspector"],options:[],isPwd:!0,formData:{position:""}}},methods:d({},Object(n["b"])("storeusers",["updateUser"]),{addToInspector:function(){var e=this;this.$q.loading.show(),this.formData.id=this.id,this.formData.roles="Inspector",this.updateUser({id:this.id,userDetails:this.formData}),this.$firestore.inspectors.doc(this.id).set({id:this.id,name:this.formData.name,email:this.formData.email,position:this.formData.position,specialSkill:this.formData.specialSkill.skillName,label:this.formData.email,value:this.formData.email,available:!0}).then((function(t){console.log(t),e.$q.loading.hide()})).catch((function(t){console.log(t),e.$q.loading.hide()})),this.$emit("close")},makeAdmin:function(){var e=this;this.$q.loading.show();var t=l["d"].httpsCallable("addAdminRole");t({email:this.user.email}).then((function(t){console.log(t),e.$q.loading.hide()}))},editUser:function(){this.updateUser({id:this.id,userDetails:this.formData}),this.$emit("close")},newPassword:function(){var e=l["d"].httpsCallable("newPassword");e({email:this.user.email}).then((function(e){console.log(e)})),this.$emit("close")},isValidEmailAddress:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),mounted:function(){this.$binding("skillNames",l["e"].collection("specialSkills")),this.formData=Object.assign({},this.user);var e=[],t=l["e"].collection("positions");t.get().then((function(t){t.forEach((function(t){e.push(t.data().positionName)}))})).catch((function(e){console.log("Error getting documents",e)}));this.options=e}},f=u,p=s("2877"),m=Object(p["a"])(f,a,r,!1,null,"0fa539d2",null);t["default"]=m.exports},fa99:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{width:"700px","max-width":"90vw"}},[s("q-card-section",{staticClass:"row"},[s("div",{staticClass:"text-h6"},[e._v("Edit User")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),s("q-form",[s("q-card-section",{staticClass:"addusers"},[s("q-input",{ref:"name",staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",label:"Name"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),s("q-select",{ref:"role",staticClass:"col q-mb-none q-pb-sm",attrs:{rules:[function(e){return!!e||"Field is required"}],"lazy-rules":"",label:"Role",options:e.options},model:{value:e.formData.roles,callback:function(t){e.$set(e.formData,"roles",t)},expression:"formData.roles"}}),s("q-input",{ref:"email",staticClass:"col q-mb-none q-pb-sm",attrs:{type:"email",rules:[function(t){return e.isValidEmailAddress(t)||"Please enter a valid email address"}],"lazy-rules":"",label:"Email"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),s("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[s("q-btn",{attrs:{icon:"save",label:"Make Admin",color:"primary"},on:{click:e.makeAdmin}}),s("q-btn",{attrs:{icon:"save",label:"Reset Password",color:"primary"},on:{click:e.newPassword}}),s("q-btn",{attrs:{icon:"save",label:"Save",color:"primary"},on:{click:e.editUser}})],1)],1)],1)},r=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("f751"),s("c47a")),i=s.n(o),n=s("2bdd"),l=s("2f62"),c=s("fc1b");s("1732");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){i()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={props:["user","id"],data:function(){return{options:["new","old","Inspector"],isPwd:!0,formData:{}}},methods:u({},Object(l["b"])("storeusers",["updateUser"]),{makeAdmin:function(){var e=this;this.$q.loading.show();var t=c["d"].httpsCallable("addAdminRole");t({email:this.user.email}).then((function(t){console.log(t),e.$q.loading.hide(),e.$emit("close"),e.$q.notify({message:"Successfully make as admin",caption:"a minutes ago",color:"primary",actions:[{label:"Ok",color:"yellow",handler:function(){}},{label:"Dismiss",color:"white",handler:function(){}}]})})).catch((function(t){e.$q.loading.hide(),Object(n["a"])(t.message)})),this.$emit("close")},editUser:function(){this.updateUser({id:this.id,userDetails:this.formData}),this.$emit("close")},newPassword:function(){var e=this;this.$q.loading.show();var t=c["d"].httpsCallable("newPassword");t({email:this.user.email}).then((function(t){console.log(t),console.log(t),e.$q.loading.hide(),e.$emit("close"),e.$q.notify({message:"Successfully change password",caption:"a minutes ago",color:"primary",actions:[{label:"Ok",color:"yellow",handler:function(){}},{label:"Dismiss",color:"white",handler:function(){}}]})})).catch((function(t){e.$q.loading.hide(),Object(n["a"])(t.message)})),this.$emit("close")},isValidEmailAddress:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),mounted:function(){this.formData=Object.assign({},this.user)}},p=f,m=s("2877"),b=Object(m["a"])(p,a,r,!1,null,"2e578424",null);t["default"]=b.exports}}]);