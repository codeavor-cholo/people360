(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["8b3efc20"],{5927:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}},[t.setAdmin?n("equipment-category"):t._e(),t.setAdmin?n("q-page-sticky",{staticClass:"all-pointer-events",attrs:{offset:[18,18]}},[n("q-fab",{attrs:{icon:"add",direction:"up",color:"primary"}},[n("q-fab-action",{attrs:{color:"primary",icon:"note_add"},on:{click:function(e){t.showAddEquipment=!0}}},[n("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[t._v("Add Equipment Type")])],1)],1)],1):t._e(),n("q-dialog",{model:{value:t.showAddEquipment,callback:function(e){t.showAddEquipment=e},expression:"showAddEquipment"}},[n("add-equipment-category",{on:{close:function(e){t.showAddEquipment=!1}}})],1)],1)},i=[],r=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),s=n.n(r),a=n("2f62"),c=n("fc1b");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={data:function(){return{admin:!1,showAddEquipment:!1}},computed:u({},Object(a["d"])("auth",["loggedIn","userDetails","setAdmin"])),components:{"equipment-category":n("74d7").default,"add-equipment-category":n("d2ba").default},mounted:function(){var t=this,e=c["c"].auth().currentUser;e&&e.getIdTokenResult().then((function(e){var n=e.claims.admin;1==n&&(t.admin=!0)}))}},d=p,f=n("2877"),m=Object(f["a"])(d,o,i,!1,null,null,null);e["default"]=m.exports},"74d7":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("div",{},[n("div",{},[n("q-table",{attrs:{filter:t.filter,title:"Equipment Category Table",color:"primary",data:t.equipmentCategories,columns:t.columns,"row-key":"id"},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"type",attrs:{props:e}},[t._v(t._s(e.row.type))]),n("q-td",{key:"position",attrs:{props:e}},[t._v(t._s(e.row.position))]),n("q-td",[n("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"edit"},on:{click:function(n){return t.showEditTypeModal(e.row)}}},[n("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[t._v("Edit")])],1)],1)],1)]}}])})],1)]),n("q-dialog",{model:{value:t.showEditType,callback:function(e){t.showEditType=e},expression:"showEditType"}},[n("edit-category",{attrs:{equipmentCategory:t.equipmentCategory,id:t.id},on:{close:function(e){t.showEditType=!1}}})],1)],1)},i=[],r=n("fc1b"),s={firestore:function(){return{equipmentCategories:r["e"].collection("equipmentCategories")}},data:function(){return{filter:"",id:"",showEditType:!1,columns:[{name:"type",align:"left",label:"Type",sortable:!0,field:"type"},{name:"position",align:"left",label:"Position",sortable:!0,field:"position"},{align:"left",label:"Action"}],equipmentCategory:{id:"",type:"",subCategory:""}}},methods:{showEditTypeModal:function(t){this.showEditType=!0,this.equipmentCategory=t,this.id=t.id}},components:{"edit-category":n("e0e9").default}},a=s,c=n("2877"),l=Object(c["a"])(a,o,i,!1,null,null,null);e["default"]=l.exports},e0e9:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticStyle:{width:"700px","max-width":"90vw"}},[n("q-card-section",{staticClass:"row"},[n("div",{staticClass:"text-h6"},[t._v("Edit Equipment Type")]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),n("q-form",{on:{submit:function(e){return e.preventDefault(),t.editEquipmentType(e)}}},[n("q-card-section",[n("q-input",{ref:"name",staticClass:"col",attrs:{rules:[function(t){return!!t||"Field is required"}],label:"Add Equipment Type"},scopedSlots:t._u([{key:"append",fn:function(){return[t.equipmentCategory.type?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"}}):t._e()]},proxy:!0}]),model:{value:t.equipmentCategory.type,callback:function(e){t.$set(t.equipmentCategory,"type",e)},expression:"equipmentCategory.type"}}),n("q-select",{staticClass:"col",attrs:{rules:[function(t){return!!t||"Field is required"}],options:t.options,label:"Inspector Position"},model:{value:t.equipmentCategory.position,callback:function(e){t.$set(t.equipmentCategory,"position",e)},expression:"equipmentCategory.position"}})],1),n("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[n("q-btn",{attrs:{type:"submit",icon:"save",label:"Save",color:"primary"}})],1)],1)],1)},i=[],r=n("fc1b"),s={props:["equipmentCategory","id"],firestore:function(){return{equipmentCategories:r["e"].collection("equipmentCategories"),positions:r["e"].collection("positions")}},data:function(){return{options:[]}},methods:{editEquipmentType:function(){var t=this;this.$q.loading.show(),this.equipmentCategory.id=r["c"].auth().currentUser.uid,this.$firestore.equipmentCategories.doc(this.id).update(this.equipmentCategory).then((function(e){console.log(e),t.$q.loading.hide()})).catch((function(e){console.log(e),t.$q.loading.hide()})),this.$emit("close")},getPositions:function(){var t=[],e=r["e"].collection("positions");e.get().then((function(e){e.forEach((function(e){t.push(e.data().positionName)}))})).catch((function(t){console.log("Error getting documents",t)}));this.options=t}},mounted:function(){this.getPositions()}},a=s,c=n("2877"),l=Object(c["a"])(a,o,i,!1,null,null,null);e["default"]=l.exports}}]);