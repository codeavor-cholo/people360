(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7b128a7c"],{"0c7e":function(e,t,s){"use strict";var a=s("6786"),n=s.n(a);n.a},"5b17":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{ref:"pageChat",staticClass:"pageChat flex column",attrs:{padding:""}},[e.messagesDownloaded?[e.otherUserDetails.online?e._e():s("q-banner",{staticClass:"bg-grey-3 text-grey-6 text-center fixed-top"},[e._v(e._s(e.otherUserDetails.name)+" is offline")]),s("div",{staticClass:"q-pa-md column col justify-end",class:{invisible:!e.showMessages}},e._l(e.messages,(function(t,a){return s("q-chat-message",{key:a,attrs:{name:"me"==t.from?e.userDetails.name:e.otherUserDetails.name,avatar:"me"==t.from?e.userDetails.photo:e.otherUserDetails.photo,text:[t.text],stamp:"minutes ago",sent:"me"==t.from,"bg-color":"me"==t.from?"white":"green-3"}})})),1)]:[s("span",{staticClass:"absolute-center"},[s("q-spinner",{attrs:{color:"primary",size:"3em"}})],1)],s("q-footer",{attrs:{elevated:""}},[s("q-toolbar",[s("q-form",{staticClass:"row full-width",on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("q-input",{ref:"newMessage",staticClass:"col",attrs:{"aria-required":"","bg-color":"white",placeholder:"Message...",dense:"",rounded:"",outlined:"",autogrow:""},on:{blur:e.scrollToBottom},model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}}),s("q-btn",{staticClass:"q-mt-xs",attrs:{type:"submit",dense:"",flat:"",color:"white",icon:"send"}})],1)],1)],1)],2)},n=[],o=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),r=s.n(o),i=s("2f62"),c=s("e883");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"PageIndex",mixins:[c["a"]],data:function(){return{newMessage:"",showMessages:!1}},methods:u({},Object(i["b"])("auth",["fbGetMessages","fbStopGettingMessages","fbSendMessages"]),{clearMessage:function(){this.newMessage="",this.$refs.newMessage.focus()},sendMessage:function(){this.newMessage.length&&this.fbSendMessages({message:{text:this.newMessage,from:"me"},otherUserID:this.$route.params.id}),this.clearMessage()},scrollToBottom:function(){var e=this.$refs.pageChat.$el;setTimeout((function(){window.scrollTo(0,e.scrollHeight)}),20)}}),computed:u({},Object(i["d"])("auth",["loggedIn","userDetails","messages","messagesDownloaded"])),mounted:function(){this.fbGetMessages(this.$route.params.id)},destroyed:function(){this.fbStopGettingMessages()},watch:{messages:function(e){var t=this;Object.keys(e).length&&(this.scrollToBottom(),setTimeout((function(){t.showMessages=!0}),200))}}},g=f,m=(s("0c7e"),s("2877")),d=Object(m["a"])(g,a,n,!1,null,"faa0f95e",null);t["default"]=d.exports},6786:function(e,t,s){}}]);