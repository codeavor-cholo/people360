(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7b9a32fc"],{"145b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut absolute-top"}},[s("pending-pre-proposal")],1)],1)},o=[],r={components:{"pending-pre-proposal":s("93cf").default}},i=r,n=s("2877"),c=Object(n["a"])(i,a,o,!1,null,null,null);e["default"]=c.exports},"93cf":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{},[t.setAdmin||"Inspector"==t.userDetails.roles?[s("div",{},[s("q-markup-table",[s("thead",[s("tr",[s("th",{attrs:{colspan:"20"}},[s("div",{staticClass:"row no-wrap items-center"},[s("div",{staticClass:"text-h5 text-primary"},[t._v("Pending Projects Table")])])])]),s("tr",[s("th",{staticClass:"text-left"},[t._v("Pre-Proposal Number")]),s("th",{staticClass:"text-left"},[t._v("Company Name")]),s("th",{staticClass:"text-left"},[t._v("Full Name")]),s("th",{staticClass:"text-left"},[t._v("Date")]),s("th",{staticClass:"text-left"},[t._v("Start Date")]),s("th",{staticClass:"text-left"},[t._v("Equipment")]),s("th",{staticClass:"text-left"},[t._v("Mobilization Fee")]),s("th",{staticClass:"text-left"},[t._v("Price")]),s("th",{staticClass:"text-left"},[t._v("Total Equipment Price")]),s("th",{staticClass:"text-left"},[t._v("Quantity")]),s("th",{staticClass:"text-left"},[t._v("Total Price")]),s("th",{staticClass:"text-left"},[t._v("Project Location")]),s("th",{staticClass:"text-left"},[t._v("Payment Slip")]),s("th",{staticClass:"text-left"},[t._v("For Downpayment")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Status")]),t.setAdmin?s("th",{staticClass:"text-left"},[t._v("Actions")]):t._e()])]),s("tbody",t._l(t.clientPreproposals,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-left"},[t._v(t._s(e.proposalNumber))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.companyName))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.fullName))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.date))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.start))]),s("td",{staticClass:"text-left"},[s("div",{staticClass:"row"},[s("div",t._l(e.itemPurchase,(function(e){return s("q-card-section",{key:e.id},[t._v(t._s(e.service_equipment))])})),1)])]),s("td",{staticClass:"text-right"},[t._v("\n                "+t._s(t._f("currency")(e.mobilizationFee,"₱",2,{decimalSeparator:"."}))+"\n              ")]),s("td",{staticClass:"text-right"},[s("div",{staticClass:"row"},[s("div",t._l(e.itemPurchase,(function(e){return s("q-card-section",{key:e.id},[t._v("\n                      "+t._s(t._f("currency")(e.service_price,"₱",2,{decimalSeparator:"."}))+"\n                    ")])})),1)])]),s("td",{staticClass:"text-right"},[t._v("\n                "+t._s(t._f("currency")(e.totalEquipmentPrice,"₱",2,{decimalSeparator:"."}))+"\n              ")]),s("td",{staticClass:"text-left"},[s("div",{staticClass:"row"},[s("div",{staticClass:"row"},[s("div",{staticClass:"row"},t._l(e.itemPurchase,(function(e,a){return s("q-card-section",{key:e.id},[t._v("\n                        "+t._s(e.service_quantity)+"\n                        ")])})),1)])])]),s("td",{staticClass:"text-right"},[t._v("\n                "+t._s(t._f("currency")(e.totalPrice,"₱",2,{decimalSeparator:"."}))+"\n              ")]),s("td",{staticClass:"text-left"},[t._v(t._s(e.location))]),s("td",{staticClass:"text-left"},[s("q-img",{staticStyle:{cursor:"pointer"},attrs:{avatar:"",src:e.paymentSlip},on:{click:function(s){return t.showImage(e)}}})],1),s("td",[t._v(t._s(t._f("currency")(e.downPayment,"₱",2,{decimalSeparator:"."})))]),s("td",{staticClass:"text-left"},[s("div",{staticClass:"row"},[s("div",t._l(e.itemPurchase,(function(e){return s("q-card-section",{key:e.id},[t._v(t._s(e.service_name))])})),1)])]),s("td",{staticClass:"text-left"},["pending"==e.status?s("q-badge",{attrs:{color:"orange-7"}},[t._v("Pending")]):t._e()],1),s("td",{staticClass:"text-left"},["pending"==e.status?s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"thumb_up_alt"},on:{click:function(s){return t.approvedProposal(e)}}},[s("q-tooltip",{attrs:{"content-class":"bg-accent"}},[t._v("Reserved")])],1):t._e(),s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"thumb_down_alt"},on:{click:function(s){return t.cancelProposal(e)}}},[s("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("Cancel")])],1)],1)])})),0)])],1)]:[s("div",{},[t.clientPreproposal.length?[s("div",{staticClass:"row items-start"},t._l(t.clientPreproposal,(function(e){return s("div",{key:e.id,staticClass:"col-md-6 col-xl-4 col-lg-6 col-xs-12 col-sm-12"},[s("q-card",{staticClass:"q-ma-xs"},[s("q-card-section",[s("div",{staticClass:"row no-wrap items-center"},[s("div",{staticClass:"col"},[s("strong",[t._v("Proposal Number:")]),t._v("\n                      "+t._s(e.proposalNumber)+"\n                    ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("strong",[t._v("Start Date:")]),t._v("\n                      "+t._s(e.start)+"\n                    ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("strong",[t._v("Project Location:")]),t._v("\n                      "+t._s(e.projectLocation)+"\n                    ")])])]),s("q-card-actions",{staticClass:"q-pt-none"},[s("q-space"),s("q-btn",{attrs:{dense:"",flat:"",color:"primary",round:"",icon:t.expanded?"keyboard_arrow_up":"keyboard_arrow_down"},on:{click:function(e){t.expanded=!t.expanded}}},[s("q-tooltip",{attrs:{"content-class":"bg-deep-orange"}},[t._v("See More")])],1)],1),s("q-slide-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}]},[s("q-separator"),s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"row"},[s("q-card-section",{staticClass:"q-pa-none"},[t._l(e.itemPurchase,(function(e){return s("div",{key:e.id},[s("strong",[t._v("Equipments:")]),t._v("\n                            "+t._s(e.service_equipment)+"\n                          ")])})),t._l(e.itemPurchase,(function(e){return s("div",{key:e.id},[s("strong",[t._v("Quantity:")]),t._v("\n                            "+t._s(e.service_quantity)+"\n                          ")])})),t._l(e.itemPurchase,(function(e){return s("div",{key:e.id},[s("strong",[t._v("Price:")]),t._v("\n                            "+t._s(t._f("currency")(e.service_price,"₱",2,{decimalSeparator:"."}))+"\n                          ")])})),s("div",[s("strong",[t._v("Mobilization Fee:")]),t._v("\n                            "+t._s(t._f("currency")(e.mobilizationFee,"₱",2,{decimalSeparator:"."}))+"\n                          ")]),s("div",[s("strong",[t._v("Total Equipment Price:")]),t._v("\n                            "+t._s(t._f("currency")(e.totalEquipmentPrice,"₱",2,{decimalSeparator:"."}))+"\n                          ")])],2)],1),s("div",{staticClass:"text-subtitle1"},[s("strong",[t._v("Total Price:")]),t._v("\n                        "+t._s(t._f("currency")(e.totalPrice,"₱",2,{decimalSeparator:"."}))+"\n                      ")])])],1)])],1)],1)})),0)]:[s("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut absolute-top"}},[s("q-banner",{staticClass:"fixed-center",scopedSlots:t._u([{key:"avatar",fn:function(){return[s("span",[t._v("\n                  No Reservation\n                  "),s("q-spinner-dots",{attrs:{size:"1em",color:"primary"}}),s("q-spinner-hourglass",{attrs:{size:"2em",color:"primary"}})],1)]},proxy:!0}])})],1)]],2)]],2),s("q-dialog",{model:{value:t.editProposal,callback:function(e){t.editProposal=e},expression:"editProposal"}},[s("edit-proposal",{attrs:{proposals:t.proposals,id:t.id},on:{close:function(e){t.editProposal=!1}}})],1),s("q-dialog",{model:{value:t.showPaymentSlipModal,callback:function(e){t.showPaymentSlipModal=e},expression:"showPaymentSlipModal"}},[s("show-payment-slip",{attrs:{proposals:t.proposals,id:t.id},on:{close:function(e){t.showPaymentSlipModal=!1}}})],1)],1)},o=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),i=s.n(r),n=s("2bdd"),c=s("2f62"),l=s("fc1b");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={data:function(){return{showPaymentSlipModal:!1,expanded:!1,slide:1,editProposal:!1,admin:!1,clientPreproposals:{},clientPreproposal:{},proposals:{},id:""}},firestore:function(){return{preproposals:l["e"].collection("preproposals")}},methods:{showImage:function(t){this.showPaymentSlipModal=!0,this.proposals=t},deleteQuantity:function(t,e){},approvedProposal:function(t){var e=this;this.$q.loading.show();var s=t.balance-t.downPayment;this.$firestore.preproposals.doc(t.id).update({status:"approved",balance:s}).then((function(t){console.log(t),e.$q.loading.hide(),e.$q.notify({message:"Successfully approved project",color:"primary",multiLine:!0,actions:[{label:"Dismiss",color:"white",handler:function(){}}]})})).catch((function(t){console.log(t),e.$q.loading.hide()}))},showEditProposal:function(t){this.editProposal=!0,this.proposals=t,this.id=t.id}},mounted:function(){var t=this,e=l["c"].auth().currentUser;e&&e.getIdTokenResult().then((function(s){var a=s.claims.admin;1==a||"Inspector"==t.userDetails.roles?t.$binding("clientPreproposals",l["e"].collection("preproposals").where("status","==","pending").orderBy("start")):t.$binding("clientPreproposal",l["e"].collection("preproposals").where("id","==",e.uid&&"status","==","pending").orderBy("start")).then((function(t){console.log(t)})).catch((function(t){Object(n["a"])(t.message)}))}))},components:{"edit-proposal":s("46d3").default,"show-payment-slip":s("505f").default},computed:p({},Object(c["d"])("auth",["loggedIn","userDetails","setAdmin"]))},v=u,_=s("2877"),f=Object(_["a"])(v,a,o,!1,null,null,null);e["default"]=f.exports}}]);