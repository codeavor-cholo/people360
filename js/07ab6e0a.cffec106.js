(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["07ab6e0a"],{"0547":function(e,t,n){"use strict";var a=n("a112"),o=n.n(a);o.a},3148:function(e,t,n){},"353d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("FullCalendar")],1)},o=[],r=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),i=n.n(r),l=n("2f62");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={components:{Calendar:n("db68").default,FullCalendar:n("c9ca").default,services:n("caef").default},computed:c({},Object(l["d"])("auth",["loggedIn","userDetails","setAdmin"]),{},Object(l["d"])("storeevents",["eventDownloaded"]))},u=d,h=n("2877"),f=Object(h["a"])(u,a,o,!1,null,null,null);t["default"]=f.exports},"763f":function(e,t,n){},a112:function(e,t,n){},c9ca:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"col"},[n("div",{staticClass:"row"},[e.setAdmin||"Inspector"==e.userDetails.roles?n("FullCalendar",{ref:"fullCalendar",attrs:{plugins:e.calendarPlugins,header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},selectable:"true",events:e.preproposals,defaultView:"dayGridMonth","event-color":e.getEventColor,now:e.today,view:e.type,type:e.type,title:e.title,hiddenDays:e.hiddenDays,weekends:e.calendarWeekends},on:{select:e.handleSelect,eventClick:e.handleClick},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):n("FullCalendar",{ref:"fullCalendar",attrs:{plugins:e.calendarPlugins,header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},selectable:"true",events:e.clientReservation,defaultView:"dayGridMonth","event-color":e.getEventColor,now:e.today,view:e.type,type:e.type,title:e.title,hiddenDays:e.hiddenDays,weekends:e.calendarWeekends},on:{eventClick:e.handleClick},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("q-dialog",{model:{value:e.medium,callback:function(t){e.medium=t},expression:"medium"}},[n("add-event",{attrs:{start:e.start,end:e.end},on:{close:function(t){e.medium=!1}}})],1),n("q-dialog",{model:{value:e.showEditEvent,callback:function(t){e.showEditEvent=t},expression:"showEditEvent"}},[n("edit-event",{attrs:{title:e.event.title,details:e.event.details,start:e.event.start,end:e.event.end,id:e.event.id,color:e.event.color},on:{close:function(t){e.showEditEvent=!1}}})],1),n("q-dialog",{model:{value:e.showEventDetails,callback:function(t){e.showEventDetails=t},expression:"showEventDetails"}},[n("show-event",{attrs:{extendedProps:e.extendedProps,title:e.event.title,details:e.event.details,start:e.event.start,end:e.event.end,id:e.event.id,color:e.event.color},on:{close:function(t){e.showEventDetails=!1}}})],1)],1)},o=[],r=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),i=n.n(r),l=n("2bdd"),s=n("2f62"),c=n("dc09"),d=n("88e1"),u=n("a7c0"),h=n("19bc"),f=n("f88c"),v=n("fc1b");n("795d"),n("a435"),n("1599");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={firestore:function(){return{preproposals:v["e"].collection("preproposals")}},components:{FullCalendar:c["a"],"add-event":n("6fae").default,"show-event":n("fc18").default,"edit-event":n("b78f").default,"calendar-table":n("efe6c").default},data:function(){var e;return e={clientPreproposals:{},start:"",end:"",clientReservation:{},admin:!1,hiddenDays:[0],medium:!1,showEditEvent:!1,showEventDetails:!1,calendarPlugins:[d["d"],u["a"],h["a"],f["a"]],calendarWeekends:!0,today:(new Date).toISOString().substr(0,10),focus:(new Date).toISOString().substr(0,10),date:"",type:"month",title:null,details:null},i()(e,"start",null),i()(e,"end",null),i()(e,"color","#1976D2"),i()(e,"currentlyEditing",null),i()(e,"selectedEvent",{}),i()(e,"selectedElement",null),i()(e,"selectedOpen",!1),i()(e,"extendedProps",{}),i()(e,"events",[]),i()(e,"dialog",!1),i()(e,"event",{title:"",details:"",start:"",end:"",color:"",id:""}),e},methods:{handleClick:function(e){console.log(e.event.extendedProps),this.showEventDetails=!0,this.event.title=e.event.title,this.extendedProps=e.event.extendedProps,this.event.id=e.event.id,this.event.color=e.event.borderColor,this.event.start=e.event.start.toUTCString()},handleSelect:function(e){console.log(e),this.start=e.startStr,this.end=e.endStr},getEventColor:function(e){return e.color}},computed:m({},Object(s["d"])("auth",["loggedIn","userDetails","setAdmin"]),{},Object(s["d"])("storeevents",["eventDownloaded"]),{monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}}),mounted:function(){var e=this,t=v["c"].auth().currentUser;t&&t.getIdTokenResult().then((function(n){var a=n.claims.admin;1==a?(e.admin=!0,e.$binding("clientPreproposals",v["e"].collection("preproposals").orderBy("companyName")),e.$store.commit("storeevents/setEventDownloaded",!0)):e.$binding("clientReservation",v["e"].collection("preproposals").where("id","==",t.uid)).then((function(e){console.log(e)})).catch((function(e){Object(l["a"])(e.message)}))}))}},b=g,y=(n("f2bb"),n("2877")),w=Object(y["a"])(b,a,o,!1,null,null,null);t["default"]=w.exports},db68:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"col"},[n("div",{staticClass:"row"},[n("q-toolbar",{staticClass:"calendar-header"},[e._v("\n      "+e._s(e.title)+"\n      "),n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"white",flat:"",label:"Today"},on:{click:e.setToday}}),n("q-btn",{staticClass:"q-mr-sm",attrs:{color:"white",flat:"",round:"",icon:"chevron_left"},on:{click:e.calendarPrev}}),n("q-btn",{attrs:{flat:"",round:"",color:"white",icon:"chevron_right"},on:{click:e.calendarNext}}),n("q-space"),n("q-btn",{attrs:{"icon-right":"arrow_drop_down",outline:"",color:"white"}},[n("span",[e._v(e._s(e.typeToLabel[e.type])+" "+e._s(e.title))]),n("q-menu",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-list",[n("q-item",{attrs:{clickable:""},on:{click:function(t){e.type="day"}}},[n("q-item-label",[e._v("Day")])],1),n("q-item",{attrs:{clickable:""},on:{click:function(t){e.type="week"}}},[n("q-item-label",[e._v("Week")])],1),n("q-item",{attrs:{clickable:""},on:{click:function(t){e.type="month"}}},[n("q-item-label",[e._v("Month")])],1),n("q-item",{attrs:{clickable:""},on:{click:function(t){e.type="4day"}}},[n("q-item-label",[e._v("4 days")])],1)],1)],1)],1)],1)],1),n("div",{staticClass:"row"},[n("QCalendar",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.mouse.left.right",value:e.handleSwipe,expression:"handleSwipe",modifiers:{mouse:!0,left:!0,right:!0}}],ref:"calendar",attrs:{locale:"en-ph",now:e.today,"enable-theme":"",view:e.type,type:e.type,"event-color":e.getEventColor,event:e.events,weekdays:[1,2,3,4,5,6],color:"primary",animated:!0,title:e.title,"mini-mode":"auto"},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay,change:e.updateRange},scopedSlots:e._u([{key:"week",fn:function(t){var a=t.week,o=t.weekdays,r=t.miniMode;return[r?e._e():[e._l(e.getWeekEvents(a,o),(function(t,o){return[n("q-badge",{key:o,staticClass:"q-row-event",class:e.badgeClasses(t,"day"),style:e.badgeStyles(t,"day",a.length)},[t.event?[n("q-icon",{staticClass:"q-mr-xs",attrs:{name:t.event.icon}}),n("span",{staticClass:"ellipsis"},[e._v(e._s(t.event.title))])]:e._e()],2)]}))]]}}]),model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),n("q-menu",{staticClass:"menu full-width",attrs:{"full-width":"","transition-show":"scale","transition-hide":"scale","close-on-content-click":!1,activator:e.selectedElement,anchor:"center middle",self:"center middle"},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("q-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[n("q-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[n("q-btn",{attrs:{color:"secondary",flat:"",round:"",icon:"edit"}}),n("q-toolbar-title",{staticClass:"bg-secondary",domProps:{innerHTML:e._s(e.selectedEvent.name)}},[e._v("Selected event name")]),n("q-space"),n("q-btn",{attrs:{flat:"",color:"secondary",round:"",icon:"add"}}),n("q-btn",{attrs:{flat:"",color:"secondary",round:"",icon:"add"}})],1),n("q-card",[n("span",{domProps:{innerHTML:e._s(e.selectedEvent.details)}},[e._v("Selected event details")])]),n("q-card-actions",[n("q-btn",{attrs:{outline:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("Cancel")])],1)],1)],1)],1)])},o=[],r=n("967e"),i=n.n(r),l=(n("96cf"),n("fa84")),s=n.n(l),c=n("fe7a"),d=n("fc1b");new Date;var u={data:function(){return{today:(new Date).toISOString().substr(0,10),focus:(new Date).toISOString().substr(0,10),date:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},name:null,details:null,start:null,end:null,color:"#1976D2",currentlyEditing:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],dialog:!1}},computed:{title:function(){if(this.titleFormatter&&this.locale&&this.selectedDate){var e=new Date(this.selectedDate);return this.titleFormatter.format(e)}return""},monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},mounted:function(){this.getEvents()},methods:{getEvents:function(){var e=s()(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].ref("inspectionEvent/");case 2:t=e.sent,n=[],t.once("value").then((function(e){e.forEach((function(e){var t=e.val();t.id=e.key,n.push(t)}))})),this.events=n,console.log(n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getEventColor:function(e){return e.color},updateFormatter:function(){try{this.titleFormatter=new Intl.DateTimeFormat(this.locale||void 0,{month:this.shortMonthLabel?"short":"long",year:"numeric",timeZone:"UTC"})}catch(e){this.titleFormatter=void 0}},handleSwipe:function(e){var t=e.evt;!1===this.dragging&&(info.duration>=30&&!1===this.ignoreNextSwipe?"right"===info.direction?this.calendarPrev():"left"===info.direction&&this.calendarNext():this.ignoreNextSwipe=!1),stopAndPrevent(t),!1!==t.cancelable&&t.preventDefault(),t.stopPropagation()},calendarNext:function(){this.$refs.calendar.next()},calendarPrev:function(){this.$refs.calendar.prev()},viewDay:function(e){var t=e.date;this.date=t,this.type="day"},setToday:function(){},showEvent:function(e){var t=this,n=e.nativeEvent,a=e.event,o=function(){t.selectedEvent=a,t.selectedElement=n.target,setTimeout((function(){return t.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(o,10)):o(),n.stopPropagation()},updateRange:function(e){for(var t=e.start,n=e.end,a=[],o=new Date("".concat(t.date,"T00:00:00")),r=new Date("".concat(n.date,"T23:59:59")),i=(r.getTime()-o.getTime())/864e5,l=this.rnd(i,i+20),s=0;s<l;s++){var c=0===this.rnd(0,3),d=this.rnd(o.getTime(),r.getTime()),u=new Date(d-d%9e5),h=9e5*this.rnd(2,c?288:8),f=new Date(u.getTime()+h);a.push({name:this.names[this.rnd(0,this.names.length-1)],start:this.formatDate(u,!c),end:this.formatDate(f,!c),color:this.colors[this.rnd(0,this.colors.length-1)]})}this.start=t,this.end=n,this.events=a},nth:function(e){return e>3&&e<21?"th":["th","st","nd","rd","th","th","th","th","th","th"][e%10]},rnd:function(e,t){return Math.floor((t-e+1)*Math.random())+e},formatDate:function(e,t){return t?"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes()):"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},components:{QCalendar:c["b"]},beforeMount:function(){this.locale=this.$q.lang.getLocale()||"en-PH",this.updateFormatter()},watch:{locale:function(){this.locale.length>2&&this.updateFormatter()},shortMonthLabel:function(){this.updateFormatter()}}},h=u,f=(n("f9f0"),n("0547"),n("e7f2"),n("2877")),v=Object(f["a"])(h,a,o,!1,null,null,null);t["default"]=v.exports},e7f2:function(e,t,n){"use strict";var a=n("3148"),o=n.n(a);o.a},f2bb:function(e,t,n){"use strict";var a=n("763f"),o=n.n(a);o.a}}]);