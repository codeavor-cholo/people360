(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6d3f6d1b"],{"3d0d":function(e,t,s){},5282:function(e,t,s){"use strict";var r=s("3d0d"),n=s.n(r);n.a},"6cef":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{},[s("div",{},[s("div",{staticClass:"row"},[s("div",{staticClass:"col q-pr-md"},[s("q-table",{attrs:{filter:e.filter,title:"Available Inspectors",color:"primary",data:e.availableInspectors,columns:e.columns,"row-key":"id"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"name",attrs:{props:t}},[e._v(e._s(t.row.name))]),s("q-td",{key:"specialSkill",attrs:{props:t}},[e._v(e._s(t.row.specialSkill.skillName))])],1)]}}])})],1),s("div",{staticClass:"col"},[s("q-table",{attrs:{filter:e.filter,title:"Approved Projects",color:"primary",data:e.approvedProjects,columns:e.columns2,"row-key":"id"},scopedSlots:e._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"companyName",attrs:{props:t}},[e._v(e._s(t.row.companyName))]),s("q-td",{key:"start",attrs:{props:t}},[e._v(e._s(t.row.start))]),s("q-td",[s("div",{staticClass:"row"},e._l(t.row.itemPurchase,(function(r){return s("div",{key:r.service_equipment,attrs:{props:t}},[s("q-card-section",[e._v("\n                      "+e._s(r.service_equipment)+"\n                      ")])],1)})),0)]),s("q-td",[s("div",{staticClass:"row"},e._l(t.row.itemPurchase,(function(r){return s("div",{key:r.service_quantity,attrs:{props:t}},[s("q-card-section",[e._v(e._s(r.service_quantity))])],1)})),0)]),e.setAdmin?s("q-td",[s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"edit"},on:{click:function(s){return e.showEditProposal(t.row)}}}),t.row.status?e._e():s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"thumb_up_alt"},on:{click:function(s){return e.approvedProposal(t.row)}}},[s("q-tooltip",{attrs:{"content-class":"bg-accent"}},[e._v("Reserved")])],1),s("q-btn",{attrs:{round:"",color:"primary",flat:"",dense:"",icon:"thumb_down_alt"},on:{click:function(t){return e.approvedProposal(e.proposal)}}},[s("q-tooltip",{attrs:{"content-class":"bg-red"}},[e._v("Cancel")])],1)],1):e._e()],1)]}}])})],1)]),s("div",{staticClass:"q-mt-md"},[s("div",{},[s("q-markup-table",[s("thead",[s("tr",[s("th",{attrs:{colspan:"10"}},[s("div",{staticClass:"row no-wrap items-center"},[s("div",{staticClass:"text-h5 text-primary"},[e._v("Inspector Schedules")])])])]),e.setAdmin||"Inspector"==e.userDetails.roles?s("FullCalendar",{ref:"fullCalendar",staticClass:"q-pa-md",attrs:{plugins:e.calendarPlugins,header:{left:"prev,next today",center:"title",right:"timeGridWeek,listWeek"},selectable:"true",events:e.inspectorSchedules,defaultView:"timeGridWeek","event-color":e.getEventColor,now:e.today,view:e.type,type:e.type,title:e.title,hiddenDays:e.hiddenDays,weekends:e.calendarWeekends},on:{select:e.handleSelect,eventClick:e.handleClick},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e()],1)])],1)])]),s("q-dialog",{model:{value:e.showAddInspectorSched,callback:function(t){e.showAddInspectorSched=t},expression:"showAddInspectorSched"}},[s("add-inspector-schedule",{attrs:{start:e.start},on:{close:function(t){e.showAddInspectorSched=!1}}})],1),s("q-dialog",{model:{value:e.editProposal,callback:function(t){e.editProposal=t},expression:"editProposal"}},[s("edit-proposal",{attrs:{proposals:e.proposals,id:e.id},on:{close:function(t){e.editProposal=!1}}})],1),s("q-dialog",{model:{value:e.showEditInspector,callback:function(t){e.showEditInspector=t},expression:"showEditInspector"}},[s("edit-inspector",{attrs:{inspector:e.inspector,id:e.id},on:{close:function(t){e.showEditInspector=!1}}})],1)],1)},n=[],i=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),o=s.n(i),a=(s("2bdd"),s("2f62")),l=s("dc09"),c=s("88e1"),d=s("a7c0"),u=s("19bc"),h=s("f88c"),p=s("fc1b");s("795d"),s("a435"),s("1599");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){o()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={firestore:function(){return{inspectors:p["e"].collection("inspectors"),positions:p["e"].collection("positions"),preproposals:p["e"].collection("preproposals"),inspectorSchedules:p["e"].collection("inspectorSchedules")}},data:function(){var e;return e={showAddInspectorSched:!1,start:"",end:"",clientReservation:{},admin:!1,hiddenDays:[0],medium:!1,showEditEvent:!1,showEventDetails:!1,calendarPlugins:[c["d"],d["a"],u["a"],h["a"]],calendarWeekends:!0,today:(new Date).toISOString().substr(0,10),focus:(new Date).toISOString().substr(0,10),date:"",type:"week",title:null,details:null},o()(e,"start",null),o()(e,"end",null),o()(e,"color","#1976D2"),o()(e,"currentlyEditing",null),o()(e,"selectedEvent",{}),o()(e,"selectedElement",null),o()(e,"selectedOpen",!1),o()(e,"extendedProps",{}),o()(e,"events",[]),o()(e,"dialog",!1),o()(e,"event",{title:"",details:"",start:"",end:"",color:"",id:""}),o()(e,"proposals",{}),o()(e,"id",""),o()(e,"editProposal",!1),o()(e,"availableInspectors",[]),o()(e,"approvedProjects",[]),o()(e,"inspectorSchedule",""),o()(e,"idInspector",""),o()(e,"key",{}),o()(e,"id",""),o()(e,"showEditInspector",!1),o()(e,"showAddInspectorSched",!1),o()(e,"inspector",{id:"",name:"",available:"true"}),o()(e,"filter",""),o()(e,"columns",[{name:"name",align:"left",label:"Full Name",sortable:!0,field:"name"},{name:"specialSkill",align:"left",label:"Special Skill",sortable:!0,field:"specialSkill"}]),o()(e,"columns2",[{name:"companyName",align:"left",label:"Company Name",sortable:!0,field:"companyName"},{name:"start",align:"left",label:"Start Date",sortable:!0,field:"start"},{name:"itemPurchase",align:"left",label:"Equipment",sortable:!0,field:"itemPurchase"},{name:"itemPurchase.service_quantity",align:"left",label:"Quantity",sortable:!0,field:"itemPurchase.service_quantity"},{align:"left",label:"Action"}]),e},methods:{handleClick:function(e){this.showEventDetails=!0,this.event.title=e.event.title,this.extendedProps=e.event.extendedProps,this.event.id=e.event.id,this.event.color=e.event.borderColor},handleSelect:function(e){console.log(e),this.showAddInspectorSched=!0,this.start=e.startStr,this.end=e.endStr},getEventColor:function(e){return e.color},showEditProposal:function(e){this.editProposal=!0,this.proposals=e,this.id=e.id},showEditInspectorModal:function(e){this.showEditInspector=!0,this.inspector=e,this.id=e.id},showAddInspectorSchedule:function(e){this.showAddInspectorSched=!0,this.inspector=e,this.id=e.id,console.log(e.id)}},components:{"edit-inspector":s("c4ff").default,"edit-proposal":s("46d3").default,FullCalendar:l["a"],"add-event":s("6fae").default,"show-event":s("fc18").default,"edit-event":s("b78f").default,"calendar-table":s("efe6c").default,"add-inspector-schedule":s("3a1a").default},computed:v({},Object(a["d"])("auth",["loggedIn","userDetails","setAdmin"]),{},Object(a["d"])("storeevents",["eventDownloaded"]),{monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}}),mounted:function(){this.$binding("availableInspectors",p["e"].collection("inspectors").where("available","==",!0)),this.$binding("approvedProjects",p["e"].collection("preproposals").where("status","==","approved").orderBy("start"))}},g=f,w=s("2877"),b=Object(w["a"])(g,r,n,!1,null,null,null);t["default"]=b.exports},ac15:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("q-drawer",{attrs:{side:"right",overlay:"",bordered:"",width:350,breakpoint:500,"content-class":"bg-grey-1"},model:{value:e.drawerRight,callback:function(t){e.drawerRight=t},expression:"drawerRight"}},[s("div",{staticClass:"text-h6 q-pa-md row justify-between"},[s("div",{staticClass:"text-capitalize"},[e._v(e._s(e.returnInspector.name)+" "),s("span",{staticClass:"text-grey-5"},[e._v("Schedule")])]),s("q-btn",{attrs:{color:"grey-10",icon:"close",size:"sm",flat:""},on:{click:function(t){e.drawerRight=!1,e.selectedStaff=null}}})],1),s("q-calendar",{directives:[{name:"show",rawName:"v-show",value:!e.showConfirmDialog,expression:"!showConfirmDialog"}],staticClass:"calendar-container",staticStyle:{height:"85vh"},attrs:{view:"day",locale:"en-us","interval-start":"7","interval-count":"11","column-header-before":!0},on:{"click:time":e.openPlottingDialog},scopedSlots:e._u([{key:"column-header-before",fn:function(t){return[s("div",{staticClass:"q-ma-xs text-primary text-overline"},[e._v("\r\n            "+e._s(e.returnSelectedProject.start)+"\r\n            ")])]}},{key:"day-body",fn:function(t){var r=t.date,n=t.timeStartPos,i=t.timeDurationHeight;return[e._l(e.getEvents(r),(function(t,r){return[t.start?s("q-badge",{key:r,class:1==e.isEventInThisProject(t)?"my-event text-white bg-orange-8":"my-event text-white bg-grey-8",style:e.badgeStyles(t,"body",n,i)},[s("div",{staticClass:"row q-gutter-xs relative-position"},[s("div",{staticClass:"col-12"},[s("span",[e._v(e._s(t.title))])]),s("div",{staticClass:"col-12"},[e._v(e._s(t.itemName))]),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:1==e.isEventInThisProject(t),expression:"isEventInThisProject(event) == true"}],staticClass:"absolute-top-right",attrs:{color:"white",icon:"close",flat:"",size:"xs"},on:{click:function(s){return e.removeEvent(t)}}})],1)]):e._e()]}))]}}]),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmDialog,expression:"showConfirmDialog"}],staticClass:"q-pa-md"},[s("q-banner",{staticClass:"bg-primary text-white"},[s("b",[e._v("NOW PLOTTING")]),s("br"),1==this.service_seleted.length&&""!=e.rangeLabel?s("div",{staticClass:"text-caption"},[e._v(e._s(e.rangeLabel))]):e._l(this.service_seleted,(function(t,r){return s("div",{key:r,staticClass:"row"},[s("div",{staticClass:"col-12 text-caption"},[e._v(e._s(e.showItemLabel(t)))])])}))],2),s("div",{staticClass:"q-gutter-md q-mt-md"},[s("q-select",{attrs:{options:e.timeOptions,label:"Start Time",filled:""},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),s("q-select",{attrs:{options:e.timeOptions,label:"End Time (viewing only)",filled:"",disable:""},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),s("div",{staticClass:"row justify-center q-gutter-md q-mt-md"},[s("q-btn",{attrs:{color:"primary",icon:"check",label:"OK",flat:""},on:{click:e.confirmSchedule}}),s("q-btn",{attrs:{color:"grey-8",icon:"cancel",label:"cancel",flat:""},on:{click:function(t){e.showConfirmDialog=!1}}})],1)],1)],1),s("div",[s("q-splitter",{staticStyle:{height:"85vh"},attrs:{vertical:""},scopedSlots:e._u([{key:"before",fn:function(){return[s("div",{staticClass:"container q-pa-md q-mr-md"},[s("div",{staticClass:"row justify-between q-mb-md"},[s("h6",{staticClass:"q-my-sm"},[e._v("ITEMS PURCHASE")])]),e._l(e.returnItemPurchase,(function(t,r){return s("q-card",{key:r,staticClass:"my-card q-pa-md q-mb-md",class:1==e.showPlottingStatus(t)?"bg-primary text-white":"",attrs:{disable:e.showConfirmDialog}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("q-avatar",{staticClass:"fit",attrs:{square:""}},[0==e.showDoneSchedulingItems(t)?s("q-img",{attrs:{src:t.service_photo,ratio:1,"spinner-color":"primary","spinner-size":"82px"}}):s("q-icon",{attrs:{name:"check",color:"orange"}})],1)],1),s("div",{staticClass:"col q-ml-md text-left q-gutter-xs"},[s("div",{staticClass:"text-subtitle2"},[e._v(e._s(t.service_name)+" x "+e._s(t.service_quantity))]),s("div",{staticClass:"text-caption"},[e._v(e._s(t.service_equipment))]),s("div",{staticClass:"text-caption"},[e._v("  "+e._s(e.returnTimeRange(t.service_name))+" ")]),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:0==e.showDoneSchedulingItems(t)&&0==e.showPlottingStatus(t),expression:"showDoneSchedulingItems(items) == false && showPlottingStatus(items) == false"}],attrs:{color:"primary",icon:"send",label:"plot schedule",size:"xs"},on:{click:function(s){e.showInspectorsforPlotting(t.service_equipment,t.service_name,t.service_quantity,e.returnTimeRange(t.service_name),t)}}}),s("div",{staticClass:"row justify-between"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showDoneSchedulingItems(t),expression:"showDoneSchedulingItems(items) == true"}],staticClass:"text-overline text-primary"},[e._v("DONE PLOTTING")]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showPlottingStatus(t),expression:"showPlottingStatus(items) == true"}],staticClass:"text-overline"},[e._v("PLOTTING NOW")]),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:1==e.showPlottingStatus(t),expression:"showPlottingStatus(items) == true"}],attrs:{color:"white",icon:"cancel",round:"",size:"sm",flat:""},on:{click:function(s){e.removeFromList(t,r),e.showConfirmDialog=!1,e.drawerRight=!1,e.selectedStaff=null}}})],1)],1)])])})),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:1==e.onSelect,expression:"onSelect == true"}],staticClass:"full-width",attrs:{color:"primary",icon:"send",label:"PLOT SCHEDULE"},on:{click:e.plotMultiSelect}})],2)]},proxy:!0},{key:"separator",fn:function(){return[s("q-avatar",{attrs:{color:"primary","text-color":"white",size:"20px",icon:"drag_indicator"}})]},proxy:!0},{key:"after",fn:function(){return[s("div",{staticClass:"container q-pa-md"},[s("div",{staticClass:"row",staticStyle:{"font-size":"1em"}},[s("div",{staticClass:"col"},[s("h6",{staticClass:"q-my-sm"},[e._v("RESERVATION DETAILS - "),s("span",{staticClass:"text-primary"},[e._v(e._s(e.returnSelectedProject.companyName)+" ("+e._s(e.returnSelectedProject.projectLocation)+")")])])]),s("div",{staticClass:"col-4 q-pa-md bg-grey-2"},[s("div",{staticClass:"row justify-between"},[s("span",{staticClass:"text-weight-bold"},[e._v("Company Name")]),s("span",[e._v(e._s(e.returnSelectedProject.companyName))])]),s("div",{staticClass:"row justify-between"},[s("span",{staticClass:"text-weight-bold"},[e._v("Contact Person")]),s("span",[e._v(e._s(e.returnSelectedProject.fullName))])]),s("div",{staticClass:"row justify-between"},[s("div",{staticClass:"text-weight-bold"},[s("q-icon",{attrs:{name:"date_range"}}),e._v(" Start Date")],1),s("span",[e._v(e._s(e.returnSelectedProject.start))])]),s("div",{staticClass:"row justify-between"},[s("div",{staticClass:"text-weight-bold"},[s("q-icon",{attrs:{name:"location_on"}}),e._v(" Location")],1),s("span",[e._v(e._s(e.returnSelectedProject.projectLocation))])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.service_seleted.length,expression:"service_seleted.length == 0"}]},[0==e.returnAllDone?s("h4",{staticClass:"full-width text-center"},[e._v("Click "),s("b",{staticClass:"text-primary"},[e._v("Plot Schedule Button")]),e._v("  In Items Purchase First")]):s("div",{staticClass:"text-center"},[s("h4",{staticClass:"text-primary text-weight-bold full-width text-center"},[e._v("All Items Scheduled Successfully")]),s("q-btn",{staticClass:"q-mt-sm q-mr-md",attrs:{color:"grey-8",outline:"",label:"review schedules"},on:{click:e.onClick}}),s("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary",label:"back to approved projects"},on:{click:function(t){return e.$router.push("/approved-projects")}}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.service_seleted.length>0,expression:"service_seleted.length > 0"}]},[s("h6",{staticClass:"q-my-sm"},[s("q-icon",{attrs:{name:"star"}}),e._v(" INSPECTORS SCHEDULED IN THIS PROJECT")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.returnSameProject.length>0,expression:"returnSameProject.length > 0"}],staticClass:"container row q-py-md"},e._l(e.returnSameProject,(function(t){return s("q-card",{key:t.id,staticClass:"my-card col-lg-3 col-sm-6 col-md-3 q-mx-sm",attrs:{disable:e.showConfirmDialog}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(t.name))]),s("div",{staticClass:"text-subtitle2"},[e._v(e._s(t.position))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{flat:e.returnPlottingHere(t),label:1==e.returnPlottingHere(t)?"plotting here":"view schedule",color:"primary",disable:e.returnPlottingHere(t)},on:{click:function(s){return e.showInspectorSchedule(t)}}})],1)],1)})),1),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.returnSameProject.length,expression:"returnSameProject.length == 0"}]},[e._v("No inspectors listed in this category.")]),s("h6",{staticClass:"q-my-sm"},[s("q-icon",{attrs:{name:"event_available"}}),e._v(" NO SCHEDULES FOR THE DAY")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.returnNoScheduleForTheDay.length>0,expression:"returnNoScheduleForTheDay.length > 0"}],staticClass:"container row q-py-md"},e._l(e.returnNoScheduleForTheDay,(function(t){return s("q-card",{key:t.id,staticClass:"my-card col-lg-3 col-sm-6 col-md-3 q-mx-sm",attrs:{disable:e.showConfirmDialog}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(t.name))]),s("div",{staticClass:"text-subtitle2"},[e._v(e._s(t.position))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{flat:e.returnPlottingHere(t),label:1==e.returnPlottingHere(t)?"plotting here":"view schedule",color:"primary",disable:e.returnPlottingHere(t)},on:{click:function(s){return e.showInspectorSchedule(t)}}})],1)],1)})),1),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.returnNoScheduleForTheDay.length,expression:"returnNoScheduleForTheDay.length == 0"}]},[e._v("No inspectors listed in this category.")]),s("h6",{staticClass:"q-my-sm"},[s("q-icon",{attrs:{name:"location_on"}}),e._v(" WITH SCHEDULES ON THIS DAY (SAME LOCATION)")],1),s("div",{staticClass:"container row q-py-md"},e._l(e.returnWithScheduleAndSameLocation,(function(t){return s("q-card",{key:t.id,staticClass:"my-card col-lg-3 col-sm-6 col-md-3 q-mx-sm",attrs:{disable:e.showConfirmDialog}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(t.name))]),s("div",{staticClass:"text-subtitle2"},[e._v(e._s(t.position))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{flat:e.returnPlottingHere(t),label:1==e.returnPlottingHere(t)?"plotting here":"view schedule",color:"primary",disable:e.returnPlottingHere(t)},on:{click:function(s){return e.showInspectorSchedule(t)}}})],1)],1)})),1),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.returnWithScheduleAndSameLocation.length,expression:"returnWithScheduleAndSameLocation.length == 0"}]},[e._v("No inspectors listed in this category.")]),s("h6",{staticClass:"q-my-sm"},[s("q-icon",{attrs:{name:"event_busy"}}),e._v(" WITH SCHEDULES ON THIS DAY")],1),s("div",{staticClass:"container row q-py-md"},e._l(e.returnWithSameDate,(function(t){return s("q-card",{key:t.id,staticClass:"my-card col-lg-3 col-sm-6 col-md-3 q-mx-sm",attrs:{disable:e.showConfirmDialog}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(t.name))]),s("div",{staticClass:"text-subtitle2"},[e._v(e._s(t.position))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{flat:e.returnPlottingHere(t),label:1==e.returnPlottingHere(t)?"plotting here":"view schedule",color:"primary",disable:e.returnPlottingHere(t)},on:{click:function(s){return e.showInspectorSchedule(t)}}})],1)],1)})),1),s("span",{directives:[{name:"show",rawName:"v-show",value:0==e.returnWithSameDate.length,expression:"returnWithSameDate.length == 0"}]},[e._v("No inspectors listed in this category.")])])])]},proxy:!0}]),model:{value:e.splitterModel,callback:function(t){e.splitterModel=t},expression:"splitterModel"}})],1)],1)},n=[],i=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("456d"),s("6b54"),s("06db"),s("20d6"),s("4917"),s("c47a")),o=s.n(i),a=s("8993"),l=s.n(a),c=(s("6762"),s("2fdb"),s("28a5"),s("a481"),s("fc1b")),d=s("fe7a"),u=s("bd4c"),h=s("dc09");s("88e1"),s("a7c0"),s("19bc"),s("f88c"),s("795d"),s("a435"),s("1599");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){o()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={components:{QCalendar:d["a"],FullCalendar:h["a"]},firestore:function(){return{inspectors:c["e"].collection("inspectors"),positions:c["e"].collection("positions"),preproposals:c["e"].collection("preproposals"),inspectorSchedules:c["e"].collection("inspectorSchedules"),newSchedules:c["e"].collection("newSchedules")}},data:function(){return{value:"",splitterModel:25,availableInspectors:[],approvedProjects:[],selectedProject:[],service_seleted:[],selected_inspector:[],newSchedules:[],onSelect:!1,showInspectors:!1,rangeLabel:"",drawerRight:!1,selectedDate:"",selectedTimeDate:null,showConfirmDialog:!1,startTime:"08:00 AM",timeOptions:["08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],endTime:"09:00 AM",selectedStaff:null}},mounted:function(){this.$binding("availableInspectors",c["e"].collection("inspectors").where("available","==",!0)),this.$binding("approvedProjects",c["e"].collection("preproposals").where("status","==","approved").orderBy("start")),this.$binding("newSchedules",c["e"].collection("newSchedules"))},computed:{groupInspectorSchedules:function(){var e=this;try{var t=this.availableInspectors;console.log(t);for(var s=function(){var s=[],n=[],i=t[r].id;e.$lodash.map(e.newSchedules,(function(t){t.inspector_Id==i&&(console.log(t.date+" "+e.returnSelectedProject.start),t.date==e.returnSelectedProject.start?s.push(t):n.push(t))}));t[r].events=s,t[r].other=n},r=0;r<t.length;r++)s();return t}catch(n){return[]}},returnNoScheduleForTheDay:function(){try{return this.$lodash.filter(this.groupInspectorSchedules,(function(e){if(0==e.events.length&&e.other.length>=0)return e}))}catch(e){return[]}},returnWithScheduleAndSameLocation:function(){var e=this;try{var t,s=function(){var s=e.newSchedules,r=e.$lodash.filter(s,(function(t){if(t.date==e.returnSelectedProject.start){var s=t.title,r=s.split(" ");if(e.$lodash.includes(r,e.returnSelectedProject.projectLocation))return t}})),n=e.$lodash.uniqBy(r,"inspector_Id");console.log(r,"filter"),console.log(n,"uniq");var i=[],o=function(){var s=e.availableInspectors[t];e.$lodash.filter(n,(function(e){e.inspector_Id==s.id&&i.push(s)}))};for(t=0;t<e.availableInspectors.length;t++)o();console.log(i,"sameLocaation");var a=e.$lodash.difference(i,e.returnSameProject);return{v:a}}();if("object"===l()(s))return s.v}catch(r){return[]}},returnSameProject:function(){var e=this;try{var t,s=function(){var s=e.newSchedules,r=e.$lodash.filter(s,(function(t){if(t.date==e.returnSelectedProject.start){var s=t.preproposals_Id,r=e.returnSelectedProject.id;if(s==r)return t}})),n=e.$lodash.uniqBy(r,"inspector_Id");console.log(r,"filter"),console.log(n,"uniq");var i=[],o=function(){var s=e.availableInspectors[t];e.$lodash.filter(n,(function(e){e.inspector_Id==s.id&&i.push(s)}))};for(t=0;t<e.availableInspectors.length;t++)o();return console.log(i,"sameProject"),{v:i}}();if("object"===l()(s))return s.v}catch(r){return[]}},returnWithSameDate:function(){var e=this;try{var t,s=function(){var s=e.newSchedules,r=e.$lodash.filter(s,(function(t){if(t.date==e.returnSelectedProject.start)return t})),n=e.$lodash.uniqBy(r,"inspector_Id");console.log(r,"filter"),console.log(n,"uniq");var i=[],o=function(){var s=e.availableInspectors[t];e.$lodash.filter(n,(function(e){e.inspector_Id==s.id&&i.push(s)}))};for(t=0;t<e.availableInspectors.length;t++)o();console.log(i,"sameLocaation");var a=e.$lodash.difference(i,e.returnSameProject);return console.log(a,"diff"),{v:a}}();if("object"===l()(s))return s.v}catch(r){return[]}},returnInspectorDates:function(){var e=this;try{var t=this.$lodash.filter(this.newSchedules,(function(t){return t.inspector_Id==e.selectedStaff.id}));return t}catch(s){return[]}},returnSumthing:function(){return console.log("checkdata"),console.log(this.returnItemPurchase,"selected"),console.log(this.availableInspectors,"available"),""},returnSelectedProject:function(){var e=this;try{var t=this.$lodash.filter(this.approvedProjects,(function(t){return t.id==e.$route.params.id}));return this.selectedDate=u["b"].formatDate(t[0].start,"YYYY-MM-DD"),console.log(t[0],"project"),t[0]}catch(s){return{}}},returnItemPurchase:function(){var e=m({},this.returnSelectedProject),t=e.itemPurchase,s=this.$lodash.map(t,(function(e){return"Earth Moving"==e.service_name?(e.timeMin=.5,e.timeMax=1):"Lifting Equipment"==service_name?(e.timeMin=1,e.timeMax=1):(e.timeMin=5,e.timeMax=6),e}));return console.log(s,"items"),e.itemPurchase},returnDone:function(){},returnInspector:function(){try{return null!==this.selectedStaff?this.selectedStaff:{name:""}}catch(e){return{name:""}}},returnProjectDate:function(){try{var e=new Date(this.returnSelectedProject.start).toISOString().substr(0,10);return e}catch(t){(new Date).toISOString().substr(0,10);return u["b"]}},returnAllDone:function(){try{for(var e=this.returnItemPurchase,t=[],s=0;s<e.length;s++)t.push(this.showDoneSchedulingItems(e[s]));return console.log(t,"arr"),console.log(this.$lodash.includes(t,!1)),1!=this.$lodash.includes(t,!1)}catch(r){return!1}}},methods:{isCssColor:function(e){return!!e&&!!e.match(/^(#|(rgb|hsl)a?\()/)},getEvents:function(e){for(var t=[],s=0;s<this.returnInspectorDates.length;s++){var r=this.returnInspectorDates[s],n=u["b"].formatDate(this.returnInspectorDates[s].date,"YYYY-MM-DD");n==e&&t.push(r)}return t},badgeClasses:function(e,t){var s,r=this.isCssColor("#0000FF"),n="header"===t;return s={},o()(s,"text-white bg-orange",!r),o()(s,"full-width",!n&&(!e.side||"full"===e.side)),o()(s,"left-side",!n&&"left"===e.side),o()(s,"right-side",!n&&"right"===e.side),s},badgeStyles:function(e,t,s,r){var n={};return s&&(n.top=s(e.start)+"px"),r&&(n.height=r(e.duration)+"px"),n["align-items"]="flex-center",n},showPlottingStatus:function(e){return this.$lodash.includes(this.service_seleted,e)},showInspectorsforPlotting:function(e,t,s,r,n){this.rangeLabel=e+" - "+t+" x "+s+" for "+r,this.showInspectors=!0,this.service_seleted.push(n),this.showConfirmDialog=!1},showItemLabel:function(e){var t=e.service_equipment,s=e.service_name,r=e.service_quantity,n=this.returnTimeRange(e.service_name);return t+" - "+s+" x "+r+" for "+n},plotSchedule:function(){var e=this;this.$q.loading.show();c["c"].auth().currentUser.uid;this.$firestore.preproposals.add(this.preproposal).then((function(t){console.log(t),e.$q.loading.hide(),e.$q.dialog({title:"Success",message:"Done Scheduling Items",persistent:!0})})).catch((function(e){showErrorMessage(e.message)}))},returnTimeRange:function(e){return"Earth Moving"==e?"30mins - 1hr":"Lifting Equipment"==e?"1hr":"5 to 6hrs"},openPlottingDialog:function(e){if(console.log(e,"timestamp"),e.time<"08:00")console.log("this is before time in");else if(e.time>"17:00")console.log("this is after time");else{this.selectedTimeDate=e,console.log("get times",this.service_seleted);var t=this.$lodash.sumBy(this.service_seleted,"timeMax"),s=this.$lodash.sumBy(this.service_seleted,"service_quantity"),r=t*s;console.log("sumTime",t);var n=e.time,i=n.split(":"),o=new Date(2020,1,1),a=u["b"].addToDate(o,{hours:i[0],minutes:"00"}),l=u["b"].addToDate(a,{hours:r});console.log("start",a),console.log("formatted",this.formatTimeInput(a)),this.startTime=this.formatTimeInput(a),this.endTime=this.formatTimeInput(l),0==this.isThereAnEvent(u["b"].formatDate(a,"hh:mm"))&&this.service_seleted.length>0&&(this.showConfirmDialog=!0)}},formatTimeInput:function(e){return u["b"].formatDate(e,"hh:mm A")},plotMultiSelect:function(){var e=this.$lodash.sumBy(this.service_seleted,"timeMax");console.log("sumTime",e),this.showInspectors=!0},removeFromList:function(e,t){var s=this.$lodash.includes(this.service_seleted,e),r=this.$lodash.findIndex(this.service_seleted,e);console.log(s,"index"),console.log(r,"index"),this.service_seleted.splice(r,1)},showInspectorSchedule:function(e){this.selectedStaff=e,this.drawerRight=!0},confirmSchedule:function(){for(var e=0;e<this.service_seleted.length;e++)this.saveScheduleService(this.service_seleted[e],e);this.showInspectors=!1,this.drawerRight=!1,this.showConfirmDialog=!1,this.service_seleted=[]},saveScheduleService:function(e,t){var s=this;this.$q.loading.show();var r=c["c"].auth().currentUser.uid,n=this.selectedStaff,i=this.returnSelectedProject;console.log(i);for(var o=this.service_seleted,a=0,l=t+1,d=t;d<l;d++)a+=o[d].timeMax;var h=a*o[t].service_quantity;console.log(h,"hours neded"),this.getDateFormatOfTime(this.startTime),this.getDateFormatOfTime(this.endTime);var p=this.getDateFormatOfTime(this.startTime);this.getDateFormatOfTime(this.endTime);console.log(p,"start");var m=u["b"].addToDate(p,{hours:h});console.log(m,"end"),console.log(u["b"].formatDate(m,"HH:mm"),"end");var v=u["b"].subtractFromDate(m,{hours:h}),f={title:i.companyName+" "+i.projectLocation,itemName:e.service_quantity+"x "+e.service_name+" "+e.service_equipment,date:i.start,duration:60*h,start:u["b"].formatDate(v,"HH:mm"),end:u["b"].formatDate(m,"HH:mm"),itemScheduled:e,inspector_Id:n.id,preproposals_Id:i.id,createdBy:r};console.log(f,"schedule"),this.$firestore.newSchedules.add(f).then((function(e){console.log(e),s.$q.loading.hide(),s.$q.dialog({title:"Success",message:"Done Scheduling Items",persistent:!0}),s.selectedStaff=null})).catch((function(e){console.log(e.message)}))},getDateFormatOfTime:function(e){var t=e.split(":"),s=u["b"].formatDate(this.returnSelectedProject.start,"YYYY,MM,DD"),r=new Date(s),n=u["b"].addToDate(r,{hours:t[0],minutes:"00"});return n.toString()},showDoneSchedulingItems:function(e){var t=this,s=this.newSchedules,r=this.returnSelectedProject.id,n=this.$lodash.filter(s,(function(s){if(s.preproposals_Id==r&&t.$lodash.isEqual(s.itemScheduled,e))return s}));return n.length>0},isEventInThisProject:function(e){var t=this.returnSelectedProject.id;return e.preproposals_Id==t},returnPlottingHere:function(e){return this.$lodash.isEqual(e,this.selectedStaff)},isThereAnEvent:function(e){var t=this,s=this.returnSelectedProject.start,r=this.$lodash.filter(this.newSchedules,(function(r){if(t.selectedStaff.id==r.inspector_Id&&s==r.date){var n=e.split(":"),i=r.start.split(":"),o=r.end.split(":");if(console.log(parseInt(n[0])),parseInt(n[0])>=parseInt(i[0])&&parseInt(n[0])<parseInt(o[0]))return r}}));return r.length>0?(console.log(r,"there is an event"),!0):(console.log("there is none"),!1)},removeEvent:function(e){var t=this;this.$q.dialog({title:"Remove Schedule",message:"Do you want to remove this schedule? (This action cannot be undone).",persistent:!0,ok:"OK",cancel:"cancel"}).onOk((function(){console.log("ok daw",e),t.$firestore.newSchedules.doc(e.id).delete().then((function(e){t.$q.dialog({title:"Success Delete",message:"Done Deleting Schedule",persistent:!0})}))}))}}},f=v,g=(s("f9f0"),s("5282"),s("2877")),w=Object(g["a"])(f,r,n,!1,null,null,null);t["default"]=w.exports},fb77:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-pa-md"},[s("schedule")],1)},n=[],i={components:{inspector:s("6cef").default,schedule:s("ac15").default}},o=i,a=s("2877"),l=Object(a["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports}}]);